{"version":3,"sources":["../../file:/C:/ProgramData/cocos/editors/Creator/3.7.2/resources/resources/3d/engine/editor/assets/tools/file:/C:/ProgramData/cocos/editors/Creator/3.7.2/resources/resources/3d/engine/editor/assets/tools/debug-view-runtime-control.ts","../../file:/C:/Users/duongnn/Desktop/model-sdk-c98/assets/scripts/file:/C:/Users/duongnn/Desktop/model-sdk-c98/assets/scripts/Main.ts"],"names":["ccclass","_decorator","property","DebugViewRuntimeControl","Node","_inheritsLoose","args","_this","_initializerDefineProperty","_single","strSingle","strComposite","strMisc","compositeModeToggleList","singleModeToggleList","miscModeToggleList","textComponentList","labelComponentList","textContentList","hideButtonLabel","_currentColorIndex","strColor","color","Color","WHITE","BLACK","RED","GREEN","BLUE","_proto","start","canvas","node","parent","getComponent","Canvas","console","error","uiTransform","UITransform","halfScreenWidth","width","halfScreenHeight","height","x","y","miscNode","getChildByName","buttonNode","instantiate","name","titleNode","i","newLabel","EnableAllCompositeModeButton","setPosition","setScale","labelComponent","Label","string","overflow","length","currentRow","newNode","singleModeToggle","textComponent","getComponentInChildren","RichText","on","Toggle","EventType","TOGGLE","toggleSingleMode","Button","CLICK","enableAllCompositeMode","changeColorButton","changeTextColor","HideButton","hideUI","compositeModeToggle","toggleComponent","isChecked","toggleLightingWithAlbedo","toggleCSMColoration","toggleCompositeMode","isTextMatched","textUI","textDescription","tempText","String","findIndex","search","substr","toggle","debugView","director","root","singleMode","enableCompositeMode","lightingWithAlbedo","csmLayerColoration","button","activeValue","active","onLoad","update","deltaTime","Component","configurable","enumerable","writable","initializer","Main","WebView","loginBase64","usrProfile","log","wb","url","signinButton","signMessageButton","logoutButton","indiciator","RamperInstant","initializeAsync","gameId","serverEnv","partner","onRecievedMsg","bind","then","_this2","onClickSignOut","onClickSignin","webMsgText","doSignIn","doSignOut","ev","JSON","stringify","eventName","data","utf8Encode","msg","encoder","TextEncoder","encode","bytesToBase64","bytes","binary","forEach","byte","fromCharCode","btoa","getCurrentDateFormatted","date","Date","year","getFullYear","month","getMonth","slice","day","getDate","onJSCall","we"],"mappings":"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","file":"all.js","sourcesContent":["import { Color, Canvas, UITransform, instantiate, math, Toggle, TextureCube, _decorator, Component, Button, labelAssembler, game, director, Node, Scene, renderer, CameraComponent, Label, ForwardPipeline, RichText } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('internal.DebugViewRuntimeControl')\r\nexport class DebugViewRuntimeControl extends Component {\r\n    @property(Node)\r\n    compositeModeToggle: Node | null = null;\r\n    @property(Node)\r\n    singleModeToggle: Node | null = null;\r\n    @property(Node)\r\n    EnableAllCompositeModeButton: Node | null = null;\r\n\t_single: number = 0;\r\n\r\n    private strSingle: string[] = [\r\n        'No Single Debug',\r\n        'Vertex Color',\r\n        'Vertex Normal',\r\n        'Vertex Tangent',\r\n        'World Position',\r\n        'Vertex Mirror',\r\n        'Face Side',\r\n        'UV0',\r\n        'UV1',\r\n        'UV Lightmap',\r\n        'Project Depth',\r\n        'Linear Depth',\r\n\r\n        'Fragment Normal',\r\n        'Fragment Tangent',\r\n        'Fragment Binormal',\r\n        'Base Color',\r\n        'Diffuse Color',\r\n        'Specular Color',\r\n        'Transparency',\r\n        'Metallic',\r\n        'Roughness',\r\n        'Specular Intensity',\r\n        'IOR',\r\n\r\n        'Direct Diffuse',\r\n        'Direct Specular',\r\n        'Direct All',\r\n        'Env Diffuse',\r\n        'Env Specular',\r\n        'Env All',\r\n        'Emissive',\r\n        'Light Map',\r\n        'Shadow',\r\n        'AO',\r\n\r\n        'Fresnel',\r\n        'Direct Transmit Diffuse',\r\n        'Direct Transmit Specular',\r\n        'Env Transmit Diffuse',\r\n        'Env Transmit Specular',\r\n        'Transmit All',\r\n        'Direct TRT',\r\n        'Env TRT',\r\n        'TRT All',\r\n\r\n        'Fog',\r\n    ];\r\n    private strComposite: string[] = [\r\n        'Direct Diffuse',\r\n        'Direct Specular',\r\n        'Env Diffuse',\r\n        'Env Specular',\r\n        'Emissive',\r\n        'Light Map',\r\n        'Shadow',\r\n        'AO',\r\n\r\n        'Normal Map',\r\n        'Fog',\r\n\r\n        'Tone Mapping',\r\n        'Gamma Correction',\r\n\r\n        'Fresnel',\r\n        'Transmit Diffuse',\r\n        'Transmit Specular',\r\n        'TRT',\r\n        'TT',\r\n    ];\r\n    private strMisc: string[] = [\r\n        'CSM Layer Coloration',\r\n        'Lighting With Albedo',\r\n    ];\r\n\r\n    private compositeModeToggleList: Node[] = [];\r\n    private singleModeToggleList: Node[] = [];\r\n    private miscModeToggleList: Node[] = [];\r\n    private textComponentList: RichText[] = [];\r\n    private labelComponentList: Label[] = [];\r\n    private textContentList: string[] = [];\r\n    private hideButtonLabel: Label;\r\n    start() {\r\n        // get canvas resolution\r\n        const canvas = this.node.parent.getComponent(Canvas);\r\n        if (!canvas) {\r\n            console.error('debug-view-runtime-control should be child of Canvas');\r\n            return;\r\n        }\r\n\r\n        const uiTransform = this.node.parent.getComponent(UITransform);\r\n        const halfScreenWidth = uiTransform.width * 0.5;\r\n        const halfScreenHeight = uiTransform.height * 0.5;\r\n\r\n        let x = -halfScreenWidth + halfScreenWidth * 0.1, y = halfScreenHeight - halfScreenHeight * 0.1;\r\n        const width = 200, height = 20;\r\n\r\n        // new nodes\r\n        const miscNode = this.node.getChildByName('MiscMode');\r\n        const buttonNode = instantiate(miscNode);\r\n        buttonNode.parent = this.node;\r\n        buttonNode.name = 'Buttons';\r\n        const titleNode = instantiate(miscNode);\r\n        titleNode.parent = this.node;\r\n        titleNode.name = 'Titles';\r\n\r\n        // title\r\n        for (let i = 0; i < 2; i++) {\r\n            const newLabel = instantiate(this.EnableAllCompositeModeButton.getChildByName('Label'));\r\n            newLabel.setPosition(x + (i > 0 ? 50 + width * 2 : 150), y, 0.0);\r\n            newLabel.setScale(0.75, 0.75, 0.75);\r\n            newLabel.parent = titleNode;\r\n            const labelComponent = newLabel.getComponent(Label);\r\n            labelComponent.string = i ? '----------Composite Mode----------' : '----------Single Mode----------';\r\n            labelComponent.color = Color.WHITE;\r\n            labelComponent.overflow = 0;\r\n            this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n        }\r\n\r\n        y -= height;\r\n        // single\r\n        let currentRow = 0;\r\n        for (let i = 0; i < this.strSingle.length; i++, currentRow++) {\r\n            if (i === this.strSingle.length >> 1) {\r\n                x += width;\r\n                currentRow = 0;\r\n            }\r\n            const newNode = i ? instantiate(this.singleModeToggle) : this.singleModeToggle;\r\n            newNode.setPosition(x, y - height * currentRow, 0.0);\r\n            newNode.setScale(0.5, 0.5, 0.5);\r\n            newNode.parent = this.singleModeToggle.parent;\r\n\r\n            const textComponent = newNode.getComponentInChildren(RichText);\r\n            textComponent.string = this.strSingle[i];\r\n            this.textComponentList[this.textComponentList.length] = textComponent;\r\n            this.textContentList[this.textContentList.length] = textComponent.string;\r\n\r\n            newNode.on(Toggle.EventType.TOGGLE, this.toggleSingleMode, this);\r\n\r\n            this.singleModeToggleList[i] = newNode;\r\n        }\r\n\r\n        x += width;\r\n        // buttons\r\n        this.EnableAllCompositeModeButton.setPosition(x + 15, y, 0.0);\r\n        this.EnableAllCompositeModeButton.setScale(0.5, 0.5, 0.5);\r\n        this.EnableAllCompositeModeButton.on(Button.EventType.CLICK, this.enableAllCompositeMode, this);\r\n        this.EnableAllCompositeModeButton.parent = buttonNode;\r\n        let labelComponent = this.EnableAllCompositeModeButton.getComponentInChildren(Label);\r\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n\r\n        const changeColorButton = instantiate(this.EnableAllCompositeModeButton);\r\n        changeColorButton.setPosition(x + 90, y, 0.0);\r\n        changeColorButton.setScale(0.5, 0.5, 0.5);\r\n        changeColorButton.on(Button.EventType.CLICK, this.changeTextColor, this);\r\n        changeColorButton.parent = buttonNode;\r\n        labelComponent = changeColorButton.getComponentInChildren(Label);\r\n        labelComponent.string = 'TextColor';\r\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n\r\n        const HideButton = instantiate(this.EnableAllCompositeModeButton);\r\n        HideButton.setPosition(x + 200, y, 0.0);\r\n        HideButton.setScale(0.5, 0.5, 0.5);\r\n        HideButton.on(Button.EventType.CLICK, this.hideUI, this);\r\n        HideButton.parent = this.node.parent;\r\n        labelComponent = HideButton.getComponentInChildren(Label);\r\n        labelComponent.string = 'Hide UI';\r\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n        this.hideButtonLabel = labelComponent;\r\n\r\n        // misc\r\n        y -= 40;\r\n        for (let i = 0; i < this.strMisc.length; i++) {\r\n            const newNode = instantiate(this.compositeModeToggle);\r\n            newNode.setPosition(x, y - height * i, 0.0);\r\n            newNode.setScale(0.5, 0.5, 0.5);\r\n            newNode.parent = miscNode;\r\n\r\n            const textComponent = newNode.getComponentInChildren(RichText);\r\n            textComponent.string = this.strMisc[i];\r\n            this.textComponentList[this.textComponentList.length] = textComponent;\r\n            this.textContentList[this.textContentList.length] = textComponent.string;\r\n\r\n            const toggleComponent = newNode.getComponent(Toggle);\r\n            toggleComponent.isChecked = i ? true : false;\r\n            newNode.on(Toggle.EventType.TOGGLE, i ? this.toggleLightingWithAlbedo : this.toggleCSMColoration, this);\r\n            this.miscModeToggleList[i] = newNode;\r\n        }\r\n\r\n        // composite\r\n        y -= 150;\r\n        for (let i = 0; i < this.strComposite.length; i++) {\r\n            const newNode = i ? instantiate(this.compositeModeToggle) : this.compositeModeToggle;\r\n            newNode.setPosition(x, y - height * i, 0.0);\r\n            newNode.setScale(0.5, 0.5, 0.5);\r\n            newNode.parent = this.compositeModeToggle.parent;\r\n\r\n            const textComponent = newNode.getComponentInChildren(RichText);\r\n            textComponent.string = this.strComposite[i];\r\n            this.textComponentList[this.textComponentList.length] = textComponent;\r\n            this.textContentList[this.textContentList.length] = textComponent.string;\r\n\r\n            newNode.on(Toggle.EventType.TOGGLE, this.toggleCompositeMode, this);\r\n\r\n            this.compositeModeToggleList[i] = newNode;\r\n        }\r\n    }\r\n\r\n    isTextMatched(textUI, textDescription) : boolean {\r\n        let tempText = new String(textUI);\r\n        const findIndex = tempText.search('>');\r\n        if (findIndex === -1) {\r\n            return textUI === textDescription;\r\n        } else {\r\n            tempText = tempText.substr(findIndex + 1);\r\n            tempText = tempText.substr(0, tempText.search('<'));\r\n            return tempText === textDescription;\r\n        }\r\n    }\r\n    toggleSingleMode(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        const textComponent = toggle.getComponentInChildren(RichText);\r\n        for (let i = 0; i < this.strSingle.length; i++) {\r\n            if (this.isTextMatched(textComponent.string, this.strSingle[i])) {\r\n                debugView.singleMode = i;\r\n            }\r\n        }\r\n    }\r\n    toggleCompositeMode(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        const textComponent = toggle.getComponentInChildren(RichText);\r\n        for (let i = 0; i < this.strComposite.length; i++) {\r\n            if (this.isTextMatched(textComponent.string, this.strComposite[i])) {\r\n                debugView.enableCompositeMode(i, toggle.isChecked);\r\n            }\r\n        }\r\n    }\r\n    toggleLightingWithAlbedo(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        debugView.lightingWithAlbedo = toggle.isChecked;\r\n    }\r\n    toggleCSMColoration(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        debugView.csmLayerColoration = toggle.isChecked;\r\n    }\r\n    enableAllCompositeMode(button: Button) {\r\n        const debugView = director.root!.debugView;\r\n        debugView.enableAllCompositeMode(true);\r\n        for (let i = 0; i < this.compositeModeToggleList.length; i++) {\r\n            const toggleComponent = this.compositeModeToggleList[i].getComponent(Toggle);\r\n            toggleComponent.isChecked = true;\r\n        }\r\n\r\n        let toggleComponent = this.miscModeToggleList[0].getComponent(Toggle);\r\n        toggleComponent.isChecked = false;\r\n        debugView.csmLayerColoration = false;\r\n        toggleComponent = this.miscModeToggleList[1].getComponent(Toggle);\r\n        toggleComponent.isChecked = true;\r\n        debugView.lightingWithAlbedo = true;\r\n    }\r\n    hideUI(button: Button) {\r\n        const titleNode = this.node.getChildByName('Titles');\r\n        const activeValue = !titleNode.active;\r\n        this.singleModeToggleList[0].parent.active = activeValue;\r\n        this.miscModeToggleList[0].parent.active = activeValue;\r\n        this.compositeModeToggleList[0].parent.active = activeValue;\r\n        this.EnableAllCompositeModeButton.parent.active = activeValue;\r\n        titleNode.active = activeValue;\r\n        this.hideButtonLabel.string = activeValue ? 'Hide UI' : 'Show UI';\r\n    }\r\n\r\n    private _currentColorIndex = 0;\r\n    private strColor: string[] = [\r\n        '<color=#ffffff>',\r\n        '<color=#000000>',\r\n        '<color=#ff0000>',\r\n        '<color=#00ff00>',\r\n        '<color=#0000ff>',\r\n    ];\r\n    private color: Color[] = [\r\n        Color.WHITE,\r\n        Color.BLACK,\r\n        Color.RED,\r\n        Color.GREEN,\r\n        Color.BLUE,\r\n    ];\r\n    changeTextColor(button: Button) {\r\n        this._currentColorIndex++;\r\n        if (this._currentColorIndex >= this.strColor.length) {\r\n            this._currentColorIndex = 0;\r\n        }\r\n        for (let i = 0; i < this.textComponentList.length; i++) {\r\n            this.textComponentList[i].string = this.strColor[this._currentColorIndex] + this.textContentList[i] + '</color>';\r\n        }\r\n        for (let i = 0; i < this.labelComponentList.length; i++) {\r\n            this.labelComponentList[i].color = this.color[this._currentColorIndex];\r\n        }\r\n    }\r\n\r\n    onLoad() {\r\n    }\r\n    update(deltaTime: number) {\r\n    }\r\n}\r\n","import {\n    _decorator, Button, Component,\n    director,\n    Label, Node, WebView\n} from 'cc';\nimport { UserProfile } from './EnumDefine'\n\ndeclare namespace RamperInstant {\n    export function initializeAsync(\n        options: { gameId: string, serverEnv: string, partner: string },\n        onReceiveMessageCallback: (data: any) => void): Promise<any>;\n    export function doSignIn(ccWebView: WebView): void;\n    export function doSignOut(ccWebView: WebView,): void;\n}\n\n// declare var firebase: any;\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('Main')\nexport class Main extends Component {\n    @property(WebView) private wb: WebView = null;\n    @property(Label) private webMsgText: Label = null;\n    @property(Button) private signinButton: Button = null;\n    @property(Button) private signMessageButton: Button = null;\n    @property(Button) private logoutButton: Button = null;\n    @property(Node) private indiciator: Node = null;\n    private loginBase64: string = '';\n    private usrProfile: UserProfile = null;\n\n    start() {\n        console.log('006');\n        //Create WebView\n        this.wb.url = \"\";\n\n        this.signinButton.node.active = false;\n        this.signMessageButton.node.active = false;\n        this.logoutButton.node.active = true;\n        this.indiciator.active = true;\n\n        //Note here\n        RamperInstant.initializeAsync(\n            { gameId: \"sdk_sample\", serverEnv: \"prod\", partner: \"coin98\" },\n            this.onRecievedMsg.bind(this))\n            .then(() => {\n                console.log(\"Initialize RamperInstant success\");\n                this.onClickSignOut();\n                this.signinButton.node.active = true;\n                this.indiciator.active = false;\n            });\n    }\n\n    public onClickSignin(url: string) {\n        this.webMsgText.string = \"\";\n        this.signinButton.node.active = false;\n        this.logoutButton.node.active = false;\n        RamperInstant.doSignIn(this.wb);\n        this.indiciator.active = true;\n    }\n\n    public onClickSignOut() {\n        console.log(\"onClickSignOut \");\n        this.webMsgText.string = \"\";\n        RamperInstant.doSignOut(this.wb);\n        this.indiciator.active = true;\n        this.wb.node.active = false;\n    }\n\n    onRecievedMsg(ev: any) {\n        console.log(\"[onRecievedMsg]\" + { ...ev });\n        this.wb.node.active = false;\n        this.webMsgText.string = JSON.stringify(ev);\n        switch (ev.eventName) {\n            case \"sign_out_success\": {\n                this.signinButton.node.active = true;\n                this.signMessageButton.node.active = false;\n                this.logoutButton.node.active = false;\n                this.indiciator.active = false;\n            } break;\n            case \"sign_out_fail\": {\n                this.signinButton.node.active = true;\n                this.logoutButton.node.active = true;\n                this.indiciator.active = false;\n            } break;\n            case \"sign_transaction_success\": {\n\n            } break;\n            case \"sign_transaction_fail\": {\n\n            } break;\n            case \"sign_message_success\": {\n\n            } break;\n            case \"sign_message_cancel\": {\n\n            } break;\n            case \"cancel\": {\n\n            } break;\n            case \"sign_in_fail\": {\n                this.indiciator.active = false;\n                this.signinButton.node.active = true;\n                this.logoutButton.node.active = true;\n            } break;\n            case \"sign_in_success\": {\n                // this.loginBase64 = this.bytesToBase64(this.utf8Encode(JSON.stringify(data))).replace(/=/g, \"\"); //no padding\n                // console.log(\"[LoginBase64] \" + data, this.loginBase64);\n                // localStorage.setItem('ramper_loggedInUser_' + data['email'], this.loginBase64);\n                this.signinButton.node.active = false;\n                //this.signMessageButton.node.active = true;\n                this.logoutButton.node.active = true;\n                this.usrProfile = ev.data;\n                console.log(\"sign_in_success\", this.usrProfile)\n                this.indiciator.active = false;\n            } break;\n            default: break;\n        }\n    }\n\n    utf8Encode(msg: string): Uint8Array {\n        const encoder = new TextEncoder();\n        return encoder.encode(msg);\n    }\n\n    bytesToBase64(bytes): string {\n        var binary = \"\";\n        bytes.forEach(byte => {\n            binary += String.fromCharCode(byte);\n        });\n        return btoa(binary);\n    }\n\n    getCurrentDateFormatted() {\n        var date = new Date();\n        var year = date.getFullYear();\n        var month = (\"0\" + (date.getMonth() + 1)).slice(-2); // Months are zero-based, so add 1\n        var day = (\"0\" + date.getDate()).slice(-2);\n        return year + \"-\" + month + \"-\" + day;\n    }\n\n    onJSCall(we) {\n        console.log('[onJSCall]', we);\n    }\n\n    update(deltaTime: number) {\n\n    }\n}\n\n"]}